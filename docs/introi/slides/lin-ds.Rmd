---
output: 
  revealjs::revealjs_presentation:
    css: "/Users/zgw/research/lecture/intro-oi/docs/css/slides.css"
    transition: slide
    embed-resources: false
    reveal_options:
      slideNumber: true
---

# çº¿æ€§çš„æ•°æ®ç»“æ„ {.center}

::: author-block
å¼ æ¡„ç®
:::

::: author-affiliation
éƒ‘å·ä¸€ä¸­(Legacy)
:::

## æœ¬èŠ‚æ¦‚è¿°

å›é¡¾: ç¨‹åº=ç®—æ³•+æ•°æ®ç»“æ„

-   æ‹¿ç€è¯´æ˜ä¹¦æ“ä½œæŸäº›ä¸œè¥¿

ä»Šå¤©ä¸Šåˆ: åŸºæœ¬çš„æ•°æ®ç»“æ„

-   é“¾è¡¨(åˆ°å¤„éƒ½æ˜¯)
-   æ ˆ
-   é˜Ÿåˆ—

éµå¾ªçš„é€»è¾‘

-   å…ˆæ‰‹å†™
-   ç„¶åå†ä½¿ç”¨STLåº“å†™

# é“¾è¡¨ {.center}

## è€ƒè™‘å¦‚ä¸‹åœºæ™¯

![](images/ll-reallife.png){data-external="1"}

## æ€è€ƒ: ä»€ä¹ˆæ˜¯é“¾è¡¨?

-   é‚£ä¸ªæŠŠä¸€å †ä¸œè¥¿ä¸²æˆä¸€ä¸ªé“¾çš„ä¸œè¥¿

. . .

ç¥ç»çš„å®šä¹‰è¯´: é“¾è¡¨æ˜¯

-   ä»€ä¹ˆéƒ½æ²¡æœ‰ç®—æ˜¯ä¸€ä¸ªé“¾è¡¨
-   ä¸€ä¸ªé“¾è¡¨, å®ƒçš„ä¸‹ä¸€ä¸ªå…ƒç´ æŒ‡å‘ä¸€ä¸ªé“¾è¡¨çš„ä¸œè¥¿æ˜¯é“¾è¡¨

å®é™…ä¸Šæ˜¯é“¾è¡¨çš„é€’å½’å®šä¹‰(DPçš„æ—¶å€™å¾ˆæœ‰ç”¨)

![](images/ll-rec-eg.png){data-external="1"}

## å¦‚ä½•è¡¨ç¤ºåŒä¸€ç±»çš„ä¸œè¥¿?

æƒ³æ³•1: æŠŠå®ƒä»¬æ”¾åˆ° "éš”é—´" é‡Œé¢, å¯¹éš”é—´(å†…å­˜æ± )ç¼–å·.

-   å•å¼€ä¸€ä¸ªæ•°ç»„, $nxt[i]:=ç¬¬iä¸ªå…ƒç´ çš„ä¸‹ä¸€ä¸ªæ˜¯ç¬¬å‡ å·?$

. . .

å¾ˆå¥½çš„æƒ³æ³•!

é—®é¢˜: å¦‚æœä¸‹ä¸€ä¸ªæ²¡æœ‰äº†, æ€ä¹ˆåŠ?

. . .

-   è®¾ç½®ä¸€ä¸ªæ­£å¸¸æ•°æ®ä¸å¯å‡ºç°çš„ç‰¹æ®Šå€¼(å¦‚-1)
-   é¢å¤–å¼€è®¾ä¸€ä¸ª $hasnxt[i]:=iæ˜¯å¦æœ‰ä¸‹ä¸€ä¸ªå…ƒç´ $

ç–‘é—®: è¿™ä¸è¿˜æ˜¯æ•°ç»„å—?

-   ç­”æ¡ˆ: è¿™æ ·æ›´å¿«!
-   è®¡ç®—æœºå†…å­˜å°±æ˜¯ä¸€ä¸ªå¤§æ•°ç»„ $2^{64}$ çš„å¯»å€ç©ºé—´

## ç»“æ„çš„å®šä¹‰ä¹‹ä¸€

``` cpp
int head,       // è¿™ä¸ªé“¾è¡¨çš„å¤´æ˜¯å“ªä¸ªèŠ‚ç‚¹
    idx,        // å½“å‰é“¾è¡¨é‡Œé¢æœ‰å‡ ä¸ªèŠ‚ç‚¹  
    val[MAXN],  // val[i]:=ç¼–å·ä¸ºiçš„æ ¼å­é‡Œçš„æ•°æ®
    nxt[MAXN];  // nxt[i]:=ç¼–å·ä¸ºiçš„æ ¼å­çš„ä¸‹ä¸€ä¸ªæ ¼å­ç¼–å·
```

![](images/ll-eg.png){data-external="1"}

å¿«é€Ÿé—®ç­”: æ„æˆçš„é“¾è¡¨æ˜¯ä»€ä¹ˆ?

. . .

-   $2 \to 5 \to 0 \to 9 \to 7 \to 3$

## æ“ä½œA: åˆå§‹åŒ–(init)

åˆå§‹çŠ¶æ€: é“¾è¡¨ä¸­æ²¡æœ‰ä»»ä½•å…ƒç´ 

ç»´æŠ¤ä¸€ä¸ªæ•°æ®ç»“æ„ = è®©æ‰€æœ‰çš„æ•°æ®å’ŒæŒ‡é’ˆæ¢å¤æ­£ç¡®çš„ä½ç½®

-   æ²¡æœ‰æ•°æ® $\to$ å¤´éƒ¨ä¸å­˜åœ¨(ç”¨-1)ä»£æ›¿
-   å½“å‰åˆ†é…çš„å†…å­˜æ± è¿˜æ²¡æœ‰ç”¨(æœ‰0ä¸ªèŠ‚ç‚¹)

. . .

``` cpp
void init(){
  head = -1; idx = 0;
}
```

## æ“ä½œB: åœ¨å¤´éƒ¨æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹(prepend)

å“ªäº›éœ€è¦æ”¹å˜?

-   æ–°æ’å…¥äº†èŠ‚ç‚¹, é¡¶å¤šæ–°æ’å…¥çš„å’Œå½“å‰çš„å¤´éœ€è¦æ”¹å˜
-   é“¾è¡¨å¯ä»¥çœ‹åšé€’å½’çš„ç»“æ„

``` cpp
void prep(int x){
  val[idx] = x, nxt[idx] = head, head = idx++;
}
```

## æ“ä½œB2: åœ¨å†…å­˜æ± çš„ç¬¬ $k$ ä½ç½®åé¢å¢åŠ ä¸€ä¸ªèŠ‚ç‚¹(add)

å“ªäº›éœ€è¦æ”¹å˜?

-   æ’å…¥èŠ‚ç‚¹çš„`nxt`
-   æ–°å»ºèŠ‚ç‚¹çš„`nxt`
-   å½“å‰çš„å†…å­˜æ± çš„ä½¿ç”¨çš„top

``` cpp
void add(int k, int x){
  val[idx] = x;
  nxt[idx] = nxt[k];
  nxt[k] = idx++;
}
```

## æ“ä½œC: åˆ é™¤å†…å­˜æ± çš„èŠ‚ç‚¹ $k$ åé¢çš„å…ƒç´ 

-   ç›´æ¥ä¿®æ”¹å½“å‰èŠ‚ç‚¹çš„`next`æŒ‡å‘`next`çš„`next`
    -   `nxt[k] = nxt[nxt[k]];`
-   é—®é¢˜: å½“å‰ä½¿ç”¨å†…å­˜æ± `idx`è¦`idx-=1`å—?

. . .

-   ä¸ç”¨! åˆ†é…å‡ºå»å°±ä¸ç®¡äº†...

. . .

é—®é¢˜! è¦åˆ é™¤å¤´å’‹åŠ? ç‰¹æ®Šåˆ¤å®š

``` cpp
void rem(int k){
  if(k==-1) {
    head = nxt[head];
    return;
  }
  nxt[k] = nxt[nxt[k]];
  
}
```

## å•é“¾è¡¨æ’å…¥å’Œåˆ é™¤çš„æ€è€ƒ

ä¸ºä»€ä¹ˆæˆ‘ä»¬æ€»æ˜¯è¯´æ’å…¥/åˆ é™¤æ ¼å­çš„åé¢çš„å…ƒç´ ?

-   å¦‚æœè¦æ’å…¥/åˆ é™¤æ ¼å­çš„ç¬¬ $k$ ä¸ªå…ƒç´ , æ€ä¹ˆåš?

. . .

éœ€è¦çŸ¥é“æˆ‘å‰é¢æ˜¯è°

-   ä½†æ˜¯æˆ‘åªè®°å½•äº†åé¢çš„ä¿¡æ¯, å°±éœ€è¦ä»å¤´æŠŠé“¾è¡¨æ‰«æä¸€é!

è§£å†³æ–¹æ³•

-   å¯ä»¥ç»´æŠ¤ä¸¤ä¸ªç»“æ„
    -   $nxt[i]:=ç¬¬iä¸ªæ ¼å­çš„ä¸‹ä¸€ä¸ªæ˜¯è°$
    -   $prv[i]:=ç¬¬iä¸ªæ ¼å­çš„å‰ä¸€ä¸ªæ˜¯è°$
-   å¥½å¤„: å¯ä»¥ä¹‹é—´åˆ é™¤å½“å‰èŠ‚ç‚¹ / åå¤„: ç»´æŠ¤çš„èŠ‚ç‚¹å¤šäº†

## åŒå‘é“¾è¡¨ä»‹ç»

ç»“æ„

``` cpp
int val[N], // val[i]:=è¡¨ç¤ºç»“ç‚¹iå­˜å‚¨çš„æ•°å€¼
    prv[N], // prv[i]:=èŠ‚ç‚¹içš„å‰ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å“ªä¸ªèŠ‚ç‚¹
    nxt[N], // nxt[i]:=èŠ‚ç‚¹içš„ä¸‹ä¸€ä¸ªèŠ‚ç‚¹æ˜¯å“ªä¸ªèŠ‚ç‚¹
    idx;    // å†…å­˜æ± ç°åœ¨ç”¨äº†å‡ ä¸ªèŠ‚ç‚¹
```

é—®é¢˜: æ€ä¹ˆåˆå§‹åŒ–?

-   ç¬¬ä¸€ä¸ªèŠ‚ç‚¹çš„å·¦è¾¹
-   ç¬¬äºŒä¸ªèŠ‚ç‚¹çš„å³è¾¹

. . .

æ˜¯ä¸æ˜¯å¯ä»¥åŠ ä¸€ä¸ª "ç©ºç™½" èŠ‚ç‚¹, è¡¨ç¤ºè¿™æ˜¯ç»“æŸ?

-   åœ¨å¤´éƒ¨å’Œå°¾éƒ¨åˆ†åˆ«åŠ å…¥ä¸€ä¸ªèŠ‚ç‚¹ä½œä¸ºç©ºç™½èŠ‚ç‚¹
-   ç”šè‡³å¯ä»¥æŠŠç¬¬ä¸€ä¸ªçš„prvå’Œæœ€åä¸€ä¸ªçš„nxtéƒ½æŒ‡å‘è¿™ä¸ªç©ºç™½èŠ‚ç‚¹
    -   å¾ªç¯èµ·æ¥äº†!

## æ“ä½œA: åˆå§‹åŒ–(dll-init)

-   è®©0,1èŠ‚ç‚¹åšå¼€å¤´å’Œç»“å°¾çš„ç©ºç™½èŠ‚ç‚¹

``` cpp
void init() {
    nxt[0] = 1;
    prv[1] = 0;
    idx = 2;// æ­¤æ—¶, å†…å­˜æ± å·²ç»æœ‰2ä¸ªå…ƒç´ äº†. åˆ†åˆ«æ˜¯0å’Œ1
}
```

## æ“ä½œB: åœ¨å†…å­˜æ±  $k$ çš„ä½ç½®å³è¾¹æ’å…¥ä¸€ä¸ªèŠ‚ç‚¹(dll-add)

ç”»ä¸€ä¸ªè‰å›¾

-   æ³¨æ„è¾¹ç•Œæƒ…å†µ: æ’å…¥ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ª

``` cpp
//åœ¨å†…å­˜æ± ä¸­ç¼–å·ä¸ºkçš„èŠ‚ç‚¹æ’å…¥çš„ç‚¹çš„å³è¾¹æ’å…¥x
void add(int k, int x) {
    val[idx] = x;
    nxt[idx] = nxt[k];
    prv[idx] = k;
    prv[nxt[k]] = idx;
    nxt[k] = idx++;
}
```

## æ“ä½œC: åˆ é™¤å†…å­˜æ±  $k$ çš„èŠ‚ç‚¹(dll-remove)

è¿˜æ˜¯, ç”»ä¸€ä¸ªè‰å›¾

-   æ³¨æ„è¾¹ç•Œæƒ…å†µ: åˆ é™¤ç¬¬ä¸€ä¸ª/æœ€åä¸€ä¸ª

``` cpp
//åˆ é™¤å†…å­˜æ± é‡Œé¢ç¼–å·ä¸ºkçš„ç‚¹
void remove(int k) {
    //å°±æ˜¯å°†kçš„å·¦ç«¯ç‚¹å’Œå³ç«¯ç‚¹ç›¸äº’è¿æ¥
    prv[nxt[k]] = prv[k];
    nxt[prv[k]] = nxt[k];
}
```

-   å¥‡æ€ªçš„è¾¹ç•Œæƒ…å†µéƒ½æ¶ˆå¤±äº†, ä¸ºä»€ä¹ˆ?
    -   æˆ‘ä»¬è§„å®šæ­»äº†0å·èŠ‚ç‚¹æ°¸è¿œæ˜¯å¤´!

## ä½¿ç”¨structç®¡ç†æ•°ç»„å…ƒç´ 

``` cpp
struct DLL{
  int prv, nxt;
  int val;
}dlls[MAXN];
```

å…¶ä¸­

-   `prv[i]`å˜ä¸ºäº†`dlls[i].prv`, çœ‹ä¸Šå»å˜å¾—æ¸…æ¥šä¸€äº›, ä½†æ˜¯æ‰“çš„å­—é•¿ä¸€ç‚¹

ä¹ é¢˜: [P1160 é˜Ÿåˆ—å®‰æ’](https://www.luogu.com.cn/problem/P1160)

## æŒ‡é’ˆç®€ä»‹

å›é¡¾åˆšåˆšçš„å†…å­˜æ± å¸¦æ¥çš„ "éšæ‚£"(ä¸å¤ªå¯èƒ½åœ¨OIå‘ç”Ÿ, ä½†æ˜¯æä¸€ä¸‹)

-   æˆ‘çœŸçš„ä¸æƒ³è®©å·²ç»åˆ é™¤çš„èŠ‚ç‚¹å æ®ç©ºé—´, æ€ä¹ˆåŠ?
    -   ç»´æŠ¤ä¸¤ä¸ªé“¾è¡¨, ä¸€ä¸ªæ˜¯`active`, ä¸€ä¸ªæ˜¯`free`
    -   æ·»åŠ ä¸€ä¸ªèŠ‚ç‚¹=ä»`free`é‡Œé¢è–…ä¸€ä¸ªåŠ åˆ°`active`é‡Œé¢
    -   ç§»é™¤ä¸€ä¸ªèŠ‚ç‚¹=ä»`active`é‡Œé¢æŠŠå®ƒæ–­æ‰åŠ åˆ°`free`é‡Œé¢
-   å¦‚æœæˆ‘ç§»é™¤äº†ç¬¬ $k$ ä¸ªèŠ‚ç‚¹ä¹‹å, ä¸å°å¿ƒåˆç§»é™¤äº†æ€ä¹ˆåŠ? (double free)
    -   è‚¯å®šæ˜¯ä½ çš„é€»è¾‘å†™é”™äº†!
    -   ä¸Šé¢çš„å†™æ³•: æœ‰å¯èƒ½freeä¸€ä¸ªå·²ç»è¢«å ç”¨çš„åˆ—è¡¨é¡¹ $\to$ ç¨‹åºå‡ºç°éé¢„æœŸçš„è¡Œä¸º

é©¬ä¸Š: ä»‹ç»æŒ‡é’ˆ

## ä»€ä¹ˆæ˜¯æŒ‡é’ˆ

å…³æ³¨å˜é‡çš„: ç±»å‹/é‡Œé¢å­˜çš„å€¼/åœ°å€

å˜é‡å­˜åœ¨å“ª? å†…å­˜çš„ "å•å…ƒ" é‡Œé¢

-   æœ‰é—¨ç‰Œå·: ç”¨&è·å–å…¶å€¼, ç±»å‹æ˜¯`Type *` (pointer to type)

æŒ‡é’ˆ: A pointer is a variable that contains the address of a variable

-   æŒ‡é’ˆè§£å¼•ç”¨: æŠŠå½“å‰å˜é‡çš„å€¼å½“åšåœ°å€, æ“çºµåœ¨é‚£ä¸ªåœ°å€çš„å˜é‡çš„å€¼
    -   åœ¨lvalueå¤„ä¼šä½¿ç”¨\*è¡¨ç¤ºæŒ‡é’ˆè§£å¼•ç”¨, å…¶æ•ˆæœå°±å’Œç›´æ¥æ“çºµå˜é‡ä¸€æ ·

## æŒ‡é’ˆä¸æ•°ç»„

-   åœ¨è¡¨è¾¾å¼ä¸­, æ•°ç»„çš„åå­—å’Œå®ƒç¬¬ä¸€ä¸ªå…ƒç´ çš„åœ°å€æ˜¯åŒä¹‰è¯
-   ä½†æ˜¯æ•°ç»„åä¸æ˜¯å˜é‡, æ•°ç»„å’ŒæŒ‡é’ˆæ˜¯ä¸¤ä¸ªä¸åŒçš„ç±»åˆ«

ğŸŒ¶[Cè¯­è¨€è®¾è®¡è€…æ˜¯æ€ä¹ˆè®¾è®¡æ•°ç»„å’ŒæŒ‡é’ˆçš„?](https://www.bilibili.com/video/BV1HT421Y7H3/?vd_source=92e33b8be0a9fcd124e9c9cb80f446f0)

-   æ¨èäºŒå‘¨ç›®å­¦ä¹ Cè¯­è¨€è§‚çœ‹
-   è¿™ç”šè‡³è¿˜ä¸æ˜¯C++! è°çŸ¥é“C++é‡Œé¢æœ‰ä»€ä¹ˆè¯¡å¼‚çš„ç‰¹æ€§...
-   ä½†æ˜¯ç”¨å¥½å¤§éƒ¨åˆ†å°±å¥½äº†...

## ç»“æ„ä½“ä¸æŒ‡é’ˆ

``` c
struct A{
  int x, y;
};

// æ¯”å¦‚ä¸€ä¸ªå¼•ç”¨
A *a = &...;
// ç°åœ¨è¦å¾—åˆ°ä¿®æ”¹Aå¼•ç”¨çš„xå…ƒç´ ?
// *a.x = 3;  é”™! å› ä¸º*çš„ä¼˜å…ˆçº§ä½ä¸€äº›, è¦å†™(*a).x = 3;
// ç®€å†™ä¸º
a->x = 3;
```

## ç”¨æŒ‡é’ˆå†™ä¸€ä¸ªå¾ªç¯é“¾è¡¨

é“¾è¡¨ç»“æ„ä½“

``` c
typedef struct __tasks_lst{
  struct task dummy; // ç¬¬ä¸€ä¸ªèŠ‚ç‚¹
  int nr_node;       // æ€»å…±èŠ‚ç‚¹çš„ä¸ªæ•°
} TSKLST;
```

``` c
struct task{
    struct task *nxt, *prv;
    char name[20];
    // .... åˆ«çš„ä»€ä¹ˆä¸œè¥¿ ....
};
```

## æ“ä½œA: åˆå§‹åŒ–(cdll-init)

``` c
void init_tsklst(TSKLST *tsklst){
  tsklst->nr_node = 0;
  // åˆå§‹çš„å†…å®¹è®©ç©ºç™½èŠ‚ç‚¹çš„å‰åéƒ½æŒ‡ç€è‡ªå·±
  tsklst->dummy.prv = tsklst->dummy.nxt = &(tsklst->dummy);
}
```

## æ“ä½œB: å‰æ’ä¸€ä¸ªå€¼(cdll-prepend)

``` c
void prepend_tnode(TSKLST *bd, task_t *tsk){
  if(bd->nr_node == 0){
    bd->dummy.nxt = bd->dummy.prv = tsk;
    tsk->nxt = tsk->prv = &bd->dummy;
    bd->nr_node++;
    return ;
  }

  task_t *u = tsk;
  task_t *w = bd->dummy.nxt;
  u->prv = w->prv;
  u->nxt = w;
  u->nxt->prv = u;
  u->prv->nxt = u;

  bd->nr_node++;
}
```

## æ“ä½œC: åˆ é™¤æŸä¸€ä¸ªèŠ‚ç‚¹(cdll-del)

``` cpp
void remove_tnode(TSKLST *bd, task_t *bitmap){
  task_t *w = bitmap;
  w->prv->nxt = w->nxt;
  w->nxt->prv = w->prv;
  bd->nr_node--;
  panic_on(bd->nr_node < 0, "Linked list count is lower than 0!");
}
```

## æ£€æŸ¥: è¾“å‡ºé“¾è¡¨çš„å½¢æ€

``` c
void __attribute__((unused)) inspect_tnode(TSKLST *bd){
  task_t *start = &bd->dummy;
  // Log("%p\n", start);
  int count = 0;
  start = start->nxt;
  while(start != &bd->dummy){
    panic_on(start->prv->nxt != start, "Did not maintain the llist well.");
    printf("[%s]->", start->name);
    count++;
    start = start->nxt;
  }
  printf("NIL\n");
  panic_on(count != bd->nr_node, "Did not maintain size well.");
}
```

## å¹³æ—¶è°ƒè¯•çš„æ—¶å€™ä¿æŠ¤è‡ªå·±ä¸å—ä¼¤å®³

-   `panic_on`æ˜¯å•¥?
    -   åœ¨`xxx`çš„æ¡ä»¶ä¸‹ææ…Œ(é€€å‡ºç¨‹åº)
-   ä¸ºä»€ä¹ˆ? ç¨‹åºåœ¨ä¸å¯¹çš„çŠ¶æ€çš„æ—¶å€™ä»Šæ—©é€€å‡º!!
    -   è¶Šæ—©æš´éœ²é—®é¢˜, å°±è¶Šå¥½è°ƒè¯•

æ€ä¹ˆå®ç°?

. . .

ç©ºæŒ‡é’ˆè§£å¼•ç”¨çš„æ—¶å€™ä¼šå¼•å‘`SIGSEGV`(æ®µé”™è¯¯)

``` c
void panic_on(bool cond){
  if(cond) *((void *)0);
}
```

-   æ­£å¼äº¤ä¸Šå»çš„æ—¶å€™ä¸ç”¨åŠ , æœ‰ä¸€å®šå‡ ç‡~~ç¨‹åºé bugé€šè¿‡æµ‹è¯•~~
-   ä½†æ˜¯å¼€O2å°±æœ‰å¯èƒ½å‡ºé—®é¢˜äº†...[ä¸ºä»€ä¹ˆ?](https://www.bilibili.com/video/BV1qa4y1j7xk?t=3410.0&p=5)

## STLä¸­çš„é“¾è¡¨: `list`

å‚çœ‹`stl-list.cpp`

-   [æ–‡æ¡£](https://cplusplus.com/reference/list/list/)

``` cpp
mylist.push_back(30);
mylist.push_front(5);
for (const auto& elem : mylist) {
    std::cout << elem << " ";
}
std::cout << std::endl;
```

## ç»ƒä¹ é“¾è¡¨

-   P1996 çº¦ç‘Ÿå¤«é—®é¢˜
-   Uva11988 ç ´ç¢çš„é”®ç›˜
-   Uva12657

å¦‚æœæœ‰2ä¸ªæˆ–è€…å¤šä¸ªé“¾è¡¨, å°†ä»–ä»¬ç»„æˆç»“æ„ä½“æ˜¯ä¸ªå¥½ä¸»æ„

# æ ˆ {.center}

## æ ˆæ˜¯åè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„

æ ˆ: stack: ä¸€å /å †å 

ç”Ÿæ´»ä¸­çš„å®ä¾‹

-   ç¾½æ¯›çƒæ¡¶

æ¨¡æ‹Ÿæ–¹å¼: ä½¿ç”¨æ•°ç»„, è¿½è¸ªæ ˆé¡¶æ˜¯è°

ç»ƒä¹ : B3614 æ ˆ

## ä½ ä»¬å¯èƒ½ä¼šçš„

-   P1739 è¡¨è¾¾å¼æ‹¬å·åŒ¹é…

## Uva 514 é“è½¨

é¢˜ç›®å¤§æ„: åˆ¤å®šä¸€ä¸ªåºåˆ—æ˜¯å¦å¯ä»¥ç”±æ ˆæ„æˆå¦ä¸€ä¸ªåºåˆ—?

æ ˆçš„æ“ä½œ:

-   åªè¦è¾“å…¥è¿˜æ²¡æœ‰å¤„ç†å®Œ
    -   æŠŠæŸä¸€é•¿åº¦çš„ä¸œè¥¿æ”¾è¿›å», ç„¶åååºè¾“å‡º

å¦ä¸€ç§è§‚ç‚¹

-   ä¸€æ­¥å†³ç­–ä¸æ˜¯å¼¹å‡ºå°±æ˜¯å†å‹ä¸€ä¸ªä¸œè¥¿è¿›å»

## P1449 åç¼€è¡¨è¾¾å¼

-   è¿™ç±»ä¼¼ä¸€é“æ¨¡æ‹Ÿé¢˜

## P1175 è¡¨è¾¾å¼è½¬æ¢A

-   ä¸­ç¼€è¡¨è¾¾å¼ $\to$ åç¼€è¡¨è¾¾å¼

è¯æ³•åˆ†æ: ç®€å•(æ•°å­—åªæœ‰ä¸€ä½!)

æ€»ä½“æ€è·¯:

-   å…ˆæŠ‘åˆ¶ç¬¦å·çš„è¾“å‡º, ç­‰åˆ°ä¸¤ä¸ªæ“ä½œæ•°è¾“å‡ºå®Œäº†åè¾“å‡ºç¬¦å·
    -   å½“å‰å­—ç¬¦0-9, ç›´æ¥è¾“å‡º
-   å¤šæ­¥è¿ç®—, åé¢æ¥çš„å…ˆç®—: ä½¿ç”¨æ ˆ

## P1175 è¡¨è¾¾å¼è½¬æ¢(ç»§ç»­)B

ç¬¬ä¸€ä¸ªé—®é¢˜: ä¼˜å…ˆçº§

-   æœ€å…ˆç®—ä¹˜æ–¹, å…ˆç®—ä¹˜é™¤, å†ç®—åŠ å‡
-   è§åˆ°é«˜ä¼˜å…ˆçº§è¿›æ¥å°±ç­‰ä¸€ç­‰(å…ˆç®—è¿™ä¸ªå­éƒ¨åˆ†); ä½ä¼˜å…ˆçº§å°±ä¸€ç›´å¼¹å‡ºåˆ°å’Œå½“å‰çš„ä¼˜å…ˆçº§æŒå¹³çš„ä½ç½®
-   ç”šè‡³é€‚ç”¨æ‹¬å·
    -   æ‹¬å·çš„ä¼˜å…ˆçº§æ˜¯0.

ç¬¬äºŒä¸ªé—®é¢˜: ç»“åˆå¾‹

-   `+-*/`æ˜¯å·¦ç»“åˆçš„: $2+3+4=((2+3)+4)$
-   ä¹˜æ–¹æ˜¯å³ç»“åˆçš„: $2^{3^4}={2^{(3^4)}}\neq2^{12}$.
-   ç‰¹æ®Š: è®¾å®šæœ€é«˜çš„ä¼˜å…ˆçº§; å½“`^`ä¸`^`ç›¸åŒçš„æ—¶å€™è¦å…¥æ ˆ

## P1175 è¡¨è¾¾å¼è½¬æ¢(ç»§ç»­)C

ç»†èŠ‚: æˆ‘æ€ä¹ˆè¾“å‡º?

-   è¿˜æ˜¯å› ä¸ºè¿™é‡Œåªæœ‰0-9, å› æ­¤ä¸èƒ½è¾“å‡ºå¤§äº10çš„æ•°. å¦‚æœæ˜¯å°±æ˜¯ç¬¦å·

å¥½éº»çƒ¦!

-   å®é™…ä¸Šè¿™æ¨¡æ‹Ÿçš„æ˜¯ [LRè¯­æ³•åˆ†æç®—æ³•](https://www.bilibili.com/video/BV1TJ4m1g7xn/).

æœ‰ä¸€ç±»ç¨å¾®ç®€å•ä¸€ç‚¹çš„, è€ƒè™‘è¡¨è¾¾å¼çš„é€’å½’ç‰¹æ€§

## P1175 è¡¨è¾¾å¼è½¬æ¢(ç»§ç»­)D

æ¯æ¬¡é€‰å‡ºä¼˜å…ˆçº§æœ€ä½çš„é‚£ä¸ªèŠ‚ç‚¹, å¹¶ä¸”åœ¨ä¸¤è¾¹åˆ†è£‚!

-   å¤§å­¦: \~2hrå°±å¯ä»¥å†™å®Œçš„ [ç¼–ç¨‹å®éªŒçš„ä¸€éƒ¨åˆ†](https://nju-projectn.github.io/ics-pa-gitbook/ics2022/1.5.html).

ç»ƒä¹ é¢˜

-   P1981 è¡¨è¾¾å¼æ‹¬å·åŒ¹é…

## å°†é€’å½’çš„è¿‡ç¨‹æ”¹å†™ä¸ºéé€’å½’

ç»ƒä¹ : å°†ä¸‹é¢çš„å‡½æ•°æ”¹å†™ä¸ºéé€’å½’çš„å½¢å¼

``` cpp
void hanoi(int n, char from, char to, char via) {
  if (n == 1) printf("%c -> %c\n", from, to);
  else {
    hanoi(n - 1, from, via, to);
    hanoi(1,     from, to,  via);
    hanoi(n - 1, via,  to,  from);
  }
  return;
}
```

-   è¿™æ ·ä½ ä»¬å°±ç†è§£äº†é€’å½’çš„è¯­ä¹‰

## STLä¸­çš„`stack`

åªèƒ½è®¿é—®æœ€é¡¶ä¸Šçš„å…ƒç´ 

`push`å’Œ`pop`

-   æ–‡æ¡£

``` cpp
mystack.push(10);
mystack.top();
mystack.pop();
while (!mystack.empty()) {
    std::cout << mystack.top() << " ";
    mystack.pop();
}
```

# é˜Ÿåˆ— {.center}

## é˜Ÿåˆ—æ˜¯å…ˆè¿›å…ˆå‡ºçš„æ•°æ®ç»“æ„

ä½¿ç”¨é“¾è¡¨æ¨¡æ‹Ÿé˜Ÿåˆ—:

å¤´ $\to$ å°¾

-   æ’å…¥: åœ¨å¤´éƒ¨æ’å…¥ä¸€ä¸ª
-   ç§»é™¤: åœ¨å°¾éƒ¨ç§»é™¤

ç»ƒä¹ : B3616

## å¾ªç¯é˜Ÿåˆ—

å¦‚æœè¦ç”¨æ•°ç»„æ¨¡æ‹Ÿ

-   å¼€ä¸¤ä¸ªæŒ‡é’ˆ, å¤´å’Œå°¾
-   å¦‚æœè¿›ä¸€ä¸ªå‡ºä¸€ä¸ª, è¿›ä¸€ä¸ªå‡ºä¸€ä¸ª, ä¸€ä¼šå„¿å°±ä¼šå¥½åƒ"æ»¡äº†"

å¤„ç†åŠæ³•:

-   tailæ»¡äº†çš„æ—¶å€™ä»å¤´æ¥
-   headå’Œtailç›¸é‡æ‰æ˜¯çœŸçš„æ»¡äº†

## æ“ä½œA: ç»“æ„å®šä¹‰(cqueue-init)

-   front: é˜Ÿå¤´çš„é‚£ä¸ªå…ƒç´ , rear: é˜Ÿå°¾çš„é‚£ä¸ªå…ƒç´ åé¢çš„é‚£ä¸ªç©ºä½

``` cpp
    int data[NR_DAT];
    int front, rear;
    bool init(){
        front = rear = 0;
        return 1;
    } 
```

-   ä¸€ä¸ªæ¨¡é˜Ÿåˆ—é•¿åº¦çš„è¿ç®—ç³»ç»Ÿ

## å±æ€§B: å¤§å°, é•¿åº¦(cqueue-size)

``` cpp
    int size(){
        return (rear - front + NR_DAT) % NR_DAT;
    }
    bool isempty(){
        return (size() == 0);
    }
```

## å±æ€§C: æ¨å…¥, å¼¹å‡º

``` cpp
    bool push(int e){
        if((rear+1)%NR_DAT==front) return false; // full!
        data[rear] = e;
        rear = (rear+1)%NR_DAT;
        return true;
    }
    bool pop(int &e){ 
        //       ^ Using reference will make the argument change
        // equivalent to int *eptr
        if(front == rear) return false;
        e = data[front];
        // *etpr = data[front];
        front = (front + 1)%NR_DAT;
        return true;
    }
```

## STLçš„`queue`

å°¾éƒ¨å…¥é˜Ÿ, å¤´éƒ¨å‡ºé˜Ÿ

``` cpp
myqueue.push(10);
myqueue.front();
myqueue.back();
myqueue.pop();
```

## åŒç«¯é˜Ÿåˆ—

-   è¦æ±‚ä¸¤è¾¹æ—¢å¯ä»¥æ’å…¥, ä¹Ÿå¯ä»¥åˆ é™¤

é“¾è¡¨: è¿™æˆ‘ç†Ÿ!

æ•°ç»„: (é•¿åº¦ä¸º $n$ )ä¸è€ƒè™‘æº¢å‡ºçš„è¯å°±æ˜¯ä¸€ä¸ªå¸¦ç€headå’Œtailçš„æ ˆ

-   `INC(x) -> (x+1)%NR_DAT`
-   `DEC(X) -> (x-1+NR_DAT)%NR_DAT`

STL: `deque`(è¯»éŸ³deck, /dÄ“ËˆkyoÍo/æ˜¯dequeue, å‡ºé˜Ÿçš„æ„æ€)

-   é©¬ä¸Šä»‹ç»STLçš„æ—¶å€™è®²è§£

## STLä¸­åŒç«¯é˜Ÿåˆ—`deque`

å†…éƒ¨å®ç°è¿˜æ˜¯ä½¿ç”¨çš„æ•°ç»„

``` cpp
mydeque.push_back(10);
mydeque.push_front(5);
for (const auto& elem : mydeque) {
    std::cout << elem << " ";
}
mydeque.pop_back();
mydeque.pop_front();
```

## å•è°ƒé˜Ÿåˆ—ä¸æ»‘åŠ¨çª—å£

æ±‚ä¸€ä¸ªçª—å£é‡Œé¢çš„æœ€å¤§å€¼/æœ€å°å€¼

|      |      |       |       |      |      |      |      | æœ€å°å€¼ | æœ€å¤§å€¼ |
|-----:|-----:|------:|------:|-----:|-----:|-----:|-----:|:------:|:------:|
| $[1$ |    3 | $-1]$ |    -3 |    5 |    3 |    6 |    7 |   -1   |   3    |
|    1 | $[3$ |    -1 | $-3]$ |    5 |    3 |    6 |    7 |   -3   |   3    |
|    1 |    3 | $[-1$ |    -3 | $5]$ |    3 |    6 |    7 |   -3   |   5    |
|    1 |    3 |    -1 | $[-3$ |    5 | $3]$ |    6 |    7 |   -3   |   5    |
|    1 |    3 |    -1 |    -3 | $[5$ |    3 | $6]$ |    7 |   3    |   6    |
|    1 |    3 |    -1 |    -3 |    5 | $[3$ |    6 | $7]$ |   3    |   7    |

## è€ƒè™‘é£Ÿå ‚æ‰“é¥­çš„æƒ…æ™¯

-   æ‰“é¥­çš„æ—¶å€™, æ€»æ˜¯å¸Œæœ›å‰é¢çš„åŒå­¦æ¯”è‡ªå·±çŸ®, å°±å¯ä»¥çœ‹åˆ°èœ
-   ç»´æŠ¤é˜Ÿä¼çš„å•è°ƒæ€§
-   çª—å£å¤§å°æœ‰é™! æœ‰æ—¶å€™å¤§å°è¶…é™éœ€è¦æŠŠé˜Ÿå¤´å¼¹æ‰

æ ¸å¿ƒæ“ä½œ

-   æå¤´: é˜Ÿå¤´çš„å…ƒç´ ä¸åœ¨çª—å£çš„èŒƒå›´å†…å°±ä»é˜Ÿå¤´å¼¹å‡º
-   å»å°¾: ç»´æŒé˜Ÿåˆ—çš„å•è°ƒæ€§(æ—¢å¯ä»¥è¿›åˆå¯ä»¥å‡º)

## P1886 æ»‘åŠ¨çª—å£/å•è°ƒé˜Ÿåˆ—

æœ€å°çš„é˜Ÿåˆ—å¦‚ä¸Šæ‰€ç¤º;

æœ€å¤§çš„é˜Ÿåˆ—å°±æ˜¯æŠŠæŸä¸ªç¬¦å·åè¿‡æ¥.

-   é—®é¢˜: æŠŠå“ªä¸ªç¬¦å·åè¿‡æ¥?

ç»ƒä¹ : P1440 æ±‚ $m$ åŒºé—´çš„æœ€å°å€¼
